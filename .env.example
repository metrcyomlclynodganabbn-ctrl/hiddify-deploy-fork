# === Hiddify Manager Auto-Deploy v4.0 - Configuration Template ===
# Скопируйте этот файл в .env и заполните реальными данными
# Новое в v4.0: PostgreSQL, Redis, Stripe payments, Monitoring

# ═══════════════════════════════════════════════════════════════
# СЕРВЕР
# ═══════════════════════════════════════════════════════════════
VPS_IP=your.vps.ip.here
VPS_SSH_PORT=22
VPS_SSH_USER=root
VPS_SSH_KEY_PATH=~/.ssh/id_ed25519

# ═══════════════════════════════════════════════════════════════
# ДОМЕН И TLS
# ═══════════════════════════════════════════════════════════════
# Основной домен панели Hiddify
PANEL_DOMAIN=panel.yourdomain.ru

# Reality destination (должен быть доступен из РФ)
# Рекомендуемые: www.apple.com:443, www.microsoft.com:443
REALITY_DEST=www.apple.com:443

# SNI список для Reality (через запятую)
REALITY_SNI_LIST=apple.com,www.apple.com

# Email для Let's Encrypt (ACME сертификатов)
ACME_EMAIL=you@example.com

# ═══════════════════════════════════════════════════════════════
# TELEGRAM БОТ v2.0
# ═══════════════════════════════════════════════════════════════
# Токен от @BotFather (создать бота: /newbot)
TELEGRAM_BOT_TOKEN=123456789:AAH_YourBotTokenHere

# Ваш Telegram ID (узнать: @userinfobot)
TELEGRAM_ADMIN_ID=987654321

# Включить Telegram Proxy (true/false)
TELEGRAM_PROXY_ENABLED=true

# ═══════════════════════════════════════════════════════════════
# ПРОТОКОЛЫ (включить=1, выключить=0)
# ═══════════════════════════════════════════════════════════════
# VLESS-Reality (приоритетный протокол для РФ)
ENABLE_VLESS_REALITY=1

# Hysteria2 (для мобильных сетей)
ENABLE_HYSTERIA2=1

# Shadowsocks-2022 (резервный протокол)
ENABLE_SS2022=1

# WireGuard с обфускацией (экспериментальный)
ENABLE_WIREGUARD_OBFUSCATED=0

# ═══════════════════════════════════════════════════════════════
# ПОЛЬЗОВАТЕЛИ (настройки по умолчанию)
# ═══════════════════════════════════════════════════════════════
# Лимит трафика для новых пользователей (в GB)
DEFAULT_DATA_LIMIT_GB=100

# Срок действия подписки по умолчанию (в днях)
DEFAULT_EXPIRY_DAYS=30

# Количество дней для блокировки истёкших пользователей
GRACE_PERIOD_DAYS=7

# ═══════════════════════════════════════════════════════════════
# БАЗА ДАННЫХ
# ═══════════════════════════════════════════════════════════════
# Путь к SQLite БД на VPS
DB_PATH=/opt/hiddify-manager/data/bot.db

# Путь к логам бота
BOT_LOG_PATH=/opt/hiddify-manager/logs/bot.log

# ═══════════════════════════════════════════════════════════════
# МОНИТОРИНГ И АЛЕРТЫ
# ═══════════════════════════════════════════════════════════════
# Интервал проверки connectivity (в минутах)
CONNECTIVITY_CHECK_INTERVAL=5

# Порог timeout'ов для авто-ротации серверов
TIMEOUT_THRESHOLD=3

# Включить мониторинг диска (true/false)
ENABLE_DISK_MONITORING=true

# Порог заполнения диска для алерта (%)
DISK_ALERT_THRESHOLD=80

# ═══════════════════════════════════════════════════════════════
# РАЗВЁРТЫВАНИЕ
# ═══════════════════════════════════════════════════════════════
# Версия Hiddify Manager
HIDDIFY_VERSION=v8.99.0

# Клонировать репозиторий при деплое (true/false)
CLONE_ON_DEPLOY=true

# Branch для клонирования
GIT_BRANCH=main

# ═══════════════════════════════════════════════════════════════
# ADVANCED (обычно не требует изменений)
# ═══════════════════════════════════════════════════════════════
# Docker registry
DOCKER_REGISTRY=ghcr.io/hiddify

# Путь установки на VPS
INSTALL_PATH=/opt/hiddify-manager

# Временная зона для логов
TZ=Europe/Moscow

# ═══════════════════════════════════════════════════════════════
# ЗАМЕЧАНИЯ
# ═══════════════════════════════════════════════════════════════
# 1. После заполнения: cp .env.example .env
# 2. Проверьте все обязательные поля (без значений "your.*")
# 3._sensitive данные (токены, ключи) никогда не коммитить в git
# 4. Для production используйте уникальные пароли и UUID
# ═══════════════════════════════════════════════════════════════


# ═══════════════════════════════════════════════════════════════
# v4.0 НОВЫЕ НАСТРОЙКИ
# ═══════════════════════════════════════════════════════════════

# === TELEGRAM BOT ===
TELEGRAM_BOT_USERNAME=SKRTvpnbot

# === DATABASE (PostgreSQL для продакшена) ===
# PostgreSQL для продакшена
DATABASE_URL=postgresql://hiddify_user:password@localhost:5432/hiddify_bot
POSTGRES_DB=hiddify_bot
POSTGRES_USER=hiddify_user
POSTGRES_PASSWORD=change_me_in_production
POSTGRES_PORT=5432

# SQLite для разработки (резервный)
# DB_PATH=data/bot.db

# === CACHE (Redis) ===
REDIS_URL=redis://localhost:6379/0
REDIS_PASSWORD=change_me_in_production
REDIS_PORT=6379

# === HIDDIFY MANAGER API ===
HIDDIFY_API_TOKEN=your_api_token_here

# === VLESS REALITY CONFIG ===
REALITY_PUBLIC_KEY=your_public_key_here
REALITY_FINGERPRINT=chrome

# === PAYMENT SYSTEM (Stripe) ===
STRIPE_SECRET_KEY=sk_test_your_key_here
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret_here
STRIPE_PUBLISHABLE_KEY=pk_test_your_key_here

# === MONITORING & HEALTH CHECKS ===
METRICS_PORT=9090
HEALTH_PORT=8080
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=change_me_in_production
PROMETHEUS_PORT=9091
GRAFANA_PORT=3000

# === LOGGING ===
LOG_LEVEL=INFO
LOG_FILE=logs/bot.log

# === OPTIONAL: Crypto Payments (TON/BTC) ===
# CRYPTO_PROVIDER=nowpayments
# CRYPTO_API_KEY=your_api_key_here

# === OPTIONAL: Backup Configuration ===
# BACKUP_ENABLED=true
# BACKUP_PATH=/opt/hiddify-manager/backups
# BACKUP_RETENTION_DAYS=30
# ═══════════════════════════════════════════════════════════════
