# –°–µ—Å—Å–∏—è –ø—Ä–æ–µ–∫—Ç–∞: hiddify-deploy-fork

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 2026-02-26 23:15
**–°—Ç–∞—Ç—É—Å**: üü¢ v3.1.1 + Database Fixes –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
**–í–µ—Ä—Å–∏—è**: v2.2.0 ‚Üí v3.0.0 ‚Üí v3.1.0 ‚Üí v3.1.1 ‚Üí v3.1.1+db

---

## üîë –ë—ã—Å—Ç—Ä—ã–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã

–ò—Å–ø–æ–ª—å–∑—É–π –ª—é–±—É—é –∏–∑ —ç—Ç–∏—Ö —Ñ—Ä–∞–∑ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞:

```
"–ø—Ä–æ–¥–æ–ª–∂–∏–º —Ä–∞–±–æ—Ç—É –Ω–∞–¥ vpn"
"–ø—Ä–æ–¥–æ–ª–∂–∞–µ–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É –í–ü–ù —Å–µ—Ä–≤–∏—Å–∞"
"–¥–∞–≤–∞–π –ø—Ä–æ–¥–æ–ª–∂–∏–º —Ä–∞–±–æ—Ç—É —Å vpn –±–æ—Ç–æ–º"
"–≤–µ—Ä–Ω—ë–º—Å—è –∫ vpn –±–æ—Ç—É"
"–ø—Ä–æ–¥–æ–ª–∂–∞–π hiddify"
"—Ä–∞–±–æ—Ç–∞ –Ω–∞–¥ vpn"
```

---

## –¢–µ–∫—É—â–∞—è –∑–∞–¥–∞—á–∞

**–ó–∞–≤–µ—Ä—à–µ–Ω–æ**: Database improvements + –¥–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä

**–ë–æ—Ç**: @SKRTvpnbot
**–°–µ—Ä–≤–µ—Ä**: kodu-3xui (5.45.114.73)
**–°—Ç–∞—Ç—É—Å**: ‚úÖ Active (running)

---

## –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (2026-02-26)

### ‚úÖ Database Improvements (commit 7cef175)

**–ü—Ä–æ–±–ª–µ–º—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã:**
1. ‚úÖ Race condition –≤ `use_invite_code()` - –∞—Ç–æ–º–∞—Ä–Ω—ã–π UPDATE —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ª–∏–º–∏—Ç–∞
2. ‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤ `create_invite_code()` - Pydantic –º–æ–¥–µ–ª–∏
3. ‚úÖ SQLite –±–µ–∑ WAL mode - –≤–∫–ª—é—á—ë–Ω PRAGMA journal_mode=WAL
4. ‚úÖ –ù–µ—Ç connection pooling - —Å–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å `database/`

**–ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:**
```
scripts/database/
‚îú‚îÄ‚îÄ __init__.py       # –≠–∫—Å–ø–æ—Ä—Ç: Database, get_db, –º–æ–¥–µ–ª–∏
‚îú‚îÄ‚îÄ connection.py     # Database singleton —Å thread-local + WAL
‚îî‚îÄ‚îÄ models.py         # Pydantic: InviteCodeCreate, InviteCodeResponse
```

**–ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- `scripts/hiddify_api.py` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω race condition, –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è
- `scripts/monitor_bot.py` - –≤–∫–ª—é—á—ë–Ω WAL mode –≤ init_db()
- `requirements.txt` - –¥–æ–±–∞–≤–ª–µ–Ω pydantic>=2.0.0
- `tests/integration/conftest.py` - WAL mode –≤ —Ñ–∏–∫—Å—Ç—É—Ä–∞—Ö
- `tests/integration/test_invite_flow.py` - 5 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤

**–¢–µ—Å—Ç—ã:** 10/10 –ø—Ä–æ—Ö–æ–¥—è—Ç
- `test_race_condition_prevention` - 5 –ø–æ—Ç–æ–∫–æ–≤, —Ç–æ–ª—å–∫–æ 2 —É—Å–ø–µ—à–Ω—ã—Ö
- `test_invite_atomic_use` - –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π
- `test_create_invite_validation` - –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- `test_wal_mode_enabled` - –ø—Ä–æ–≤–µ—Ä–∫–∞ WAL mode
- `test_validate_invite_code_unified` - —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

### ‚úÖ –î–µ–ø–ª–æ–π –Ω–∞ kodu-3xui

**–í—ã–ø–æ–ª–Ω–µ–Ω–æ:**
1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
2. –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (telebot, pydantic)
3. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã .env –∏ data –∏–∑ –±—ç–∫–∞–ø–∞
4. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
5. –ë–æ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω —Å –Ω–æ–≤—ã–º –∫–æ–¥–æ–º

**–°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞:** ‚úÖ Active (running) —Å 2026-02-26 23:13 MSK

---

## –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ —Ä–∞–Ω–µ–µ

### ‚úÖ Phase 1: Hiddify API Client
- **–§–∞–π–ª**: `scripts/hiddify_api.py` (589 —Å—Ç—Ä–æ–∫ —Å –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏)
- –ö–ª–∞—Å—Å `HiddifyAPI` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Hiddify Manager API
- –ú–µ—Ç–æ–¥—ã: create_user(), get_users(), get_stats(), get_user_connections()
- –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∏–Ω–≤–∞–π—Ç–æ–≤ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –∏ race condition –∑–∞—â–∏—Ç–æ–π

### ‚úÖ Phase 2: –ê–¥–º–∏–Ω–∫–∞ - —Ä–∞–±–æ—Ç–∞–µ—Ç
- **üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏**: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–æ 50 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –¥–µ—Ç–∞–ª—è–º–∏
- **‚ûï –°–æ–∑–¥–∞—Ç—å —é–∑–µ—Ä–∞**: –†–ï–ê–õ–¨–ù–û–ï —Å–æ–∑–¥–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É (SQLite + API)
- **üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏–∑ SQLite + Hiddify API

### ‚úÖ Phase 3: –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
–í—Å–µ 5 –∫–Ω–æ–ø–æ–∫ –ø–æ–¥ –∫–∞–∂–¥—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –≤ –∞–¥–º–∏–Ω–∫–µ:
- **üìã –ò–Ω—Ñ–æ** - –ø–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
- **üîë –ü—Ä–æ–¥–ª–∏—Ç—å** - +30 –¥–Ω–µ–π –∫ –ø–æ–¥–ø–∏—Å–∫–µ
- **üì¶ –õ–∏–º–∏—Ç** - +50 GB –∫ —Ç—Ä–∞—Ñ–∏–∫—É
- **üîí –ë–ª–æ–∫** - –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å/—Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å
- **üóëÔ∏è –£–¥–∞–ª–∏—Ç—å** - —É–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### ‚úÖ Phase 4: –ò–Ω–≤–∞–π—Ç—ã - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –∑–∞—â–∏—Ç–æ–π
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∏–Ω–≤–∞–π—Ç-–∫–æ–¥–æ–≤ –ø—Ä–∏ `/start`
- –ê—Ç–æ–º–∞—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å –∑–∞—â–∏—Ç–æ–π –æ—Ç race conditions
- –ü–æ–∫–∞–∑ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø—Ä–∏–≥–ª–∞—à—ë–Ω–Ω—ã—Ö –≤ "–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –¥—Ä—É–≥–∞"

### ‚úÖ –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ v3.1: –°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π
- **–ú–∏–≥—Ä–∞—Ü–∏—è –ë–î**: –∫–æ–ª–æ–Ω–∫–∞ role –≤ —Ç–∞–±–ª–∏—Ü–µ users
- **–ú–æ–¥—É–ª—å —Ä–æ–ª–µ–π**: `scripts/roles.py` (270 —Å—Ç—Ä–æ–∫)
- **–û–±–Ω–æ–≤–ª–µ–Ω –±–æ—Ç**: –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–æ–ª—è–º–∏
- **–°–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏**: `scripts/migrate_to_v31.py`

### ‚úÖ v3.1.1: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ "–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –¥—Ä—É–≥–∞"
- **user_main_keyboard(telegram_id=None)**: –∫–Ω–æ–ø–∫–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è MANAGER/ADMIN
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –≤ handle_invite()**: —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –¥–ª—è USER
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –≤ handle_invite_copy()**: –∑–∞—â–∏—Ç–∞ –æ—Ç –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Å—ã–ª–∫–∏
- **Graceful degradation**: try/except, –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ None

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

```
scripts/
‚îú‚îÄ‚îÄ database/              # –ù–æ–≤—ã–π (v3.1.1+)
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py       # –≠–∫—Å–ø–æ—Ä—Ç –º–æ–¥—É–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ connection.py     # Database singleton + WAL mode
‚îÇ   ‚îî‚îÄ‚îÄ models.py         # Pydantic –≤–∞–ª–∏–¥–∞—Ü–∏—è
‚îú‚îÄ‚îÄ monitor_bot.py        # –ì–ª–∞–≤–Ω—ã–π –±–æ—Ç (aiogram)
‚îú‚îÄ‚îÄ hiddify_api.py        # API –∫–ª–∏–µ–Ω—Ç + –∏–Ω–≤–∞–π—Ç—ã —Å –∑–∞—â–∏—Ç–æ–π
‚îú‚îÄ‚îÄ roles.py              # –†–æ–ª–µ–≤–∞—è –º–æ–¥–µ–ª—å
‚îú‚îÄ‚îÄ db_admin.py           # –ê–¥–º–∏–Ω–∫–∞ –ë–î
‚îú‚îÄ‚îÄ qr_generator.py       # QR –∫–æ–¥—ã
‚îî‚îÄ‚îÄ migrate_to_v31.py     # –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ v3.1
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (SQLite)

**–ü—É—Ç—å:** `/opt/hiddify-manager/data/bot.db`

**–¢–∞–±–ª–∏—Ü—ã:**
- `users` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å —Ä–æ–ª—è–º–∏ (role: user/manager/admin)
- `invites` - –∏–Ω–≤–∞–π—Ç-–∫–æ–¥—ã —Å max_uses, used_count
- `connections` - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**WAL mode –≤–∫–ª—é—á—ë–Ω:**
```sql
PRAGMA journal_mode=WAL;  -- wal
PRAGMA busy_timeout=30000;
PRAGMA foreign_keys=ON;
```

### –ò–Ω–≤–∞–π—Ç-—Å–∏—Å—Ç–µ–º–∞ —Å –∑–∞—â–∏—Ç–æ–π

**–°–æ–∑–¥–∞–Ω–∏–µ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π:**
```python
from scripts.hiddify_api import create_invite_code

result = create_invite_code(
    db_path="data/bot.db",
    code="INV_abc12345",  # INV_ + hex-—Å–∏–º–≤–æ–ª—ã
    created_by=telegram_id,
    max_uses=5,           # 1-1000
    expires_at=None
)
```

**–í–∞–ª–∏–¥–∞—Ü–∏—è:**
- –§–æ—Ä–º–∞—Ç: `INV_` + 8-50 —Å–∏–º–≤–æ–ª–æ–≤
- –°–∏–º–≤–æ–ª—ã: hex [a-f0-9] –ø–æ—Å–ª–µ `INV_`
- max_uses: 1-1000
- created_by: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å

**–ê—Ç–æ–º–∞—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```python
from scripts.hiddify_api import use_invite_code

result = use_invite_code(db_path, "INV_abc12345")
# {'success': bool, 'message': str, 'invite_data': dict|None}
```

**Race condition –∑–∞—â–∏—Ç–∞:**
- –ê—Ç–æ–º–∞—Ä–Ω—ã–π UPDATE —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –≤ WHERE
- –¢–æ–ª—å–∫–æ max_uses —É—Å–ø–µ—à–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π

---

## –ì–¥–µ –æ—Å—Ç–∞–Ω–æ–≤–∏–ª–∏—Å—å

**–¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è**: v3.1.1 + Database Fixes
**–°—Ç–∞—Ç—É—Å**: üü¢ Production (kodu-3xui)

**–í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ:**
```
‚úÖ v3.1.1 - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∏–Ω–≤–∞–π—Ç–æ–≤ –ø–æ —Ä–æ–ª—è–º
‚úÖ Database fixes - Race conditions, WAL mode, validation
‚úÖ –°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π (role column)
‚úÖ –ú–æ–¥—É–ª—å scripts/roles.py
‚úÖ –ú–æ–¥—É–ª—å scripts/database/
‚úÖ –¢–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã (10/10)
‚úÖ –°–µ—Ä–≤–∏—Å –∞–∫—Ç–∏–≤–µ–Ω (systemd)
```

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. CI/CD –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è - –∞–≤—Ç–æ–¥–µ–ø–ª–æ–π –ø–æ—Å–ª–µ git push
2. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–æ—Ç–∞ - health checks
3. UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–æ–ª—è–º–∏ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ (v3.1.2)

---

## –í–∞–∂–Ω—ã–µ —Ñ–∞–π–ª—ã

### –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥:
- `scripts/monitor_bot.py` - –≥–ª–∞–≤–Ω—ã–π –±–æ—Ç
- `scripts/hiddify_api.py` - API –∫–ª–∏–µ–Ω—Ç + –∏–Ω–≤–∞–π—Ç—ã
- `scripts/roles.py` - —Å–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π
- `scripts/database/` - –º–æ–¥—É–ª—å –ë–î (v3.1.1+)

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:
- `.env` - –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–ù–ï –ö–û–ú–ú–ò–¢–¨–¢–¨)
- `.env.example` - —à–∞–±–ª–æ–Ω –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### –î–µ–ø–ª–æ–π:
- `scripts/deploy.sh` - —Å–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- SSH: `ssh kodu-3xui`
- –ü—É—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ: `/opt/hiddify-manager/`

---

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –õ–æ–∫–∞–ª—å–Ω–æ:
```bash
cd ~/workspace/hiddify-deploy-fork

# –¢–µ—Å—Ç—ã
pytest tests/integration/test_invite_flow.py -v

# –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ
python3 scripts/monitor_bot.py

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–æ–ª–∏
python3 -c "from scripts.roles import can_invite_users; print(can_invite_users(159595061))"
```

### –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:
```bash
ssh kodu-3xui

# –°—Ç–∞—Ç—É—Å –±–æ—Ç–∞
systemctl status hiddify-bot.service

# –õ–æ–≥–∏
journalctl -u hiddify-bot.service -f

# –î–µ–ø–ª–æ–π
cd /opt/hiddify-manager && git pull && systemctl restart hiddify-bot.service

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
sqlite3 /opt/hiddify-manager/data/bot.db "SELECT telegram_id, role FROM users LIMIT 5;"
```

---

## –°–µ—Ä–≤–µ—Ä–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

**kodu-3xui** (5.45.114.73)
- –ü—Ä–æ–≤–∞–π–¥–µ—Ä: Kodu.host
- OS: Ubuntu 24.04.4 LTS
- RAM: 3.9GB total, ~500MB used (13%)
- Disk: 40GB total, ~3GB used (8%)
- –ü—É—Ç—å: `/opt/hiddify-manager/`
- Git: https://github.com/metrcyomlclynodganabbn-ctrl/hiddify-deploy-fork.git

**SSH –¥–æ—Å—Ç—É–ø:**
- Alias: `kodu-3xui` –∏–ª–∏ `3xui`
- –ü–∞—Ä–æ–ª—å: –≤ `~/.mcp-env` (KODU_3XUI_PASSWORD)
- –ê–≤—Ç–æ–¥–µ–ø–ª–æ–π: `git pull` + `systemctl restart`

---

## –ò—Å—Ç–æ—Ä–∏—è –≤–µ—Ä—Å–∏–π

### v3.1.1+db (2026-02-26) - Database Fixes
- ‚úÖ Race condition protection (atomic UPDATE)
- ‚úÖ Pydantic validation
- ‚úÖ WAL mode for SQLite
- ‚úÖ Connection pooling module
- ‚úÖ 10/10 integration tests pass

### v3.1.1 (2026-02-26) - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∏–Ω–≤–∞–π—Ç–æ–≤
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –¥—Ä—É–≥–∞" —Ç–æ–ª—å–∫–æ –¥–ª—è MANAGER/ADMIN
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞—Ö
- ‚úÖ Graceful degradation

### v3.1.0 (2026-02-26) - –°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π
- ‚úÖ Role enum (USER, MANAGER, ADMIN)
- ‚úÖ –ú–æ–¥—É–ª—å scripts/roles.py
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î (role column)

### v3.0.0 (2026-02-26) - –ü–æ–ª–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥
- ‚úÖ Hiddify API Client
- ‚úÖ –†–∞–±–æ—á–∞—è –∞–¥–º–∏–Ω–∫–∞
- ‚úÖ –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –∏–Ω–≤–∞–π—Ç–æ–≤

---

## TODO (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)

1. **CI/CD –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** - —Ö—É–∫ –ø–æ—Å–ª–µ git push –¥–ª—è –∞–≤—Ç–æ–¥–µ–ø–ª–æ—è
2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–æ—Ç–∞** - health checks, –∞–ª–µ—Ä—Ç—ã
3. **SSH –∫–ª—é—á–∏** - –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å auth –≤–º–µ—Å—Ç–æ –ø–∞—Ä–æ–ª—è
4. **–ë—ç–∫–∞–ø—ã –ë–î** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã bot.db

---

## –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ —Ä–µ—Å—É—Ä—Å—ã

- **GitHub**: https://github.com/metrcyomlclynodganabbn-ctrl/hiddify-deploy-fork
- **–°–µ—Ä–≤–µ—Ä**: kodu-3xui (5.45.114.73)
- **–ë–æ—Ç**: @SKRTvpnbot
- **–ê–¥–º–∏–Ω**: 159595061
